<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="manifest" href="./manifest.json"/>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>        
        <script src="https://www.gstatic.com/firebasejs/5.5.5/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.5.5/firebase-database.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.5.5/firebase.js"></script>
        <link href="./bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <script src="./bootstrap/js/bootstrap.min.js"></script>
        <script type="text/javascript">
            if("serviceWorker" in navigator )
            {
                navigator.serviceWorker.register("./ServiceWorker.js").then(function() 
                {
                    console.log("Serivice worker is register");
                });
            }
          // Initialize Firebase
          var config = {
            apiKey : "AIzaSyDER0tAT39djqlwiX1-V0_t1LCrLFs5NZ4",
            authDomain: "merekstoria.firebaseapp.com",
            databaseURL: "https://merekstoria.firebaseio.com",
            projectId: "merekstoria",
            storageBucket: "merekstoria.appspot.com",
            messagingSenderId: "964160194172"
          };
          firebase.initializeApp(config);
        </script>
        <title>メルクストーリア ギルドバトル</title> 
        </head>
        <body>
        <div class="contanier">
                <div class="row">
                        <div class="col-md-8 offset-md-2 ">
                                <div class="col-md-8 offset-md-2 table-responsive">
                                        <p>日付</p><input id="guildBattleDate" type="date"  required/>
                                    <table class="table table-bordered">
                                        <tr><td><input type="text" value="自ギルド" readonly="true" /></td><td><input type="text" placeholder="Gp" /></tr>
                                        <tr><td><input type="text" placeholder="ギルド名" /></td><td><input type="text" placeholder="Gp" /></tr>
                                        <tr><td><input type="text" placeholder="ギルド名" /></td><td><input type="text" placeholder="Gp" /></tr>
                                        <tr><td><input type="text" placeholder="ギルド名" /></td><td><input type="text" placeholder="Gp" /></tr>
                                    </table>
                                <button id="commit-guild-progress">更新</button>                    
                    </div>
                </div>        
        </div>
        <script>
            function dateFormat(date)
            {
                return date.getFullYear() + "-" +
                    ( "0"+( date.getMonth()+1 ) ).slice(-2)+ "-" +
                    ( "0"+date.getDate() ).slice(-2);
                
            }
                $(function(){
                    $(document).ready(function()
                    {
                        var now = new Date();
                        var yyyymmdd = dateFormat(now);
                        $("#guildBattleDate").val(yyyymmdd);
                    });

                    $("#send").on("click", function(e){

                    var guildBattleDate = $("#guildBattleDate").val();
                    var commentsRef = firebase.database().ref('/guildBattle');
                    commentsRef.set({ Date: guildBattleDate });                       
                    });
                });
                </script>
        </body>
</html>